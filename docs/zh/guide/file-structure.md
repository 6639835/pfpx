# 文件结构

PFPX 导航数据文件遵循明确定义的结构，为不同类型的导航数据提供不同的段。

## 整体组织

典型的导航数据文件组织如下：

```
┌─────────────────┐
│     文件头       │ ← 明文元数据
│    （明文）      |
├─────────────────┤
│                 │
│    跑道数据      │ ← 编码内容开始
│     (RWY)       │
│                 │
├─────────────────┤
│                 │
│   航路点数据      │ ← 机场、VOR、NDB 等
│     (WPT)       │
│                 │
├─────────────────┤
│                 │
│    航路数据       │ ← 路线信息
│     (AWY)       │
│                 │
├─────────────────┤
│                 │
│    SID 数据      │ ← 离场程序
│     (SID)       │
│                 │
├─────────────────┤
│                 │
│   STAR 数据      │ ← 进场程序
│     (STR)       │
│                 │
└─────────────────┘
```

## 段详情

### 文件头（明文）
头部包含有关导航数据库的元数据：
- 数据库名称和版本
- 有效日期（AIRAC 周期）
- 数据提供商信息

### 跑道段（RWY）
包含全球机场的跑道信息：
- 跑道尺寸和方向
- 表面类型和条件
- 地理坐标

### 航路点段（WPT）
包括各种类型的导航点：
- **机场**（类型 0）
- **VFR 航路点**（类型 1）  
- **VOR/TACAN**（类型 2）
- **TACAN**（类型 3）
- **VOR/DME**（类型 4）
- **NDB**（类型 5）
- **航路点**（类型 6）
- **DME**（类型 9）

### 航路（AWY）
定义航路：
- 高空航路
- 低空航路  
- RNAV 航路

### SID 段（SID）
标准仪表离场程序：
- 离场程序
- 跑道过渡程序

### STAR 段（STR）
标准终端进场路线程序：
- 机场进场程序
- 进近过渡
- 跑道特定进场

## 数据编码

### 头部与内容
- **头部**：以明文 ASCII 存储
- **内容**：使用密钥 `0x85` 的 XOR 加密编码

### 逐行格式
每个编码段都遵循逐行格式，其中：
- 每行代表一个数据记录
- 行由标准换行符分隔
- 记录格式因段类型而异

## 记录识别

每种记录类型都可以通过其前缀识别：

| 前缀 | 段 | 描述 |
|--------|---------|-------------|
| `RWY` | 跑道 | 跑道信息 |
| `WPT` | 航路点 | 航路点（包含机场和导航设施） |
| `AWY` | 航路 | 航路 |
| `SID` | 离场 | 标准仪表离场 |
| `STR` | 进场 | 标准仪表进场 |

## 文件大小考虑

导航数据文件可能相当大：
- **典型大小**：50-200 MB
- **记录数量**：数十万条记录
- **全球覆盖**：全球导航数据

## 处理注意事项

::: tip 批量处理
由于文件大小，考虑分块处理：
- 使用手动工具时一次处理 3,000-4,000 行
- 用于自动处理的流式传输
- 为大型操作实现进度跟踪
:::

## 下一步

- **[了解解码](./decoding-process.md)** - 将编码数据转换为可读格式
- **[探索特定段](./runways.md)** - 每种数据类型的详细格式
- **[使用自动化工具](../tools/)** - 高效处理大文件
